---
layout: post
title: Zimbra zmconfigd not starting/running
date: 2012-12-05 01:01:04.000000000 -07:00
type: post
published: true
status: publish
categories: []
tags:
- linux
- netcat
- watch
- zimbra
- zmconfigd
meta:
  _edit_last: '19750133'
  _publicize_done_external: a:1:{s:8:"linkedin";a:1:{s:10:"Wf9JSr6aRc";b:1;}}
  _wpas_done_1386473: '1'
  _wpas_skip_1386473: '1'
  _oembed_e4df1e4cb1946b4baf30c297b5927b02: "{{unknown}}"
  _oembed_1b1b41a21235ad6cdf8b63efac630591: "{{unknown}}"
  _oembed_be462074d4bbcc0b08fdc2232f4d0b20: "{{unknown}}"
  _oembed_77aca7a462353e032321db7128caafda: "{{unknown}}"
  _oembed_4713ce8b69b195501e260026fc6e2673: "{{unknown}}"
  _oembed_cf4dc9671fef2fc86113571590f8d172: "{{unknown}}"
  _oembed_dd18c5ddf044c7b46904ebfb56918e5d: "{{unknown}}"
author:
  login: jskarbek
  email: jtslear@gmail.com
  display_name: jskarbek
  first_name: ''
  last_name: ''
---
<p><strong>The Problem:</strong></p>
<p>zmconfigd status would indicate that it is not running when viewing the services status on the admin console as well as output from `zmcontrol status`</p>
<p><strong>The fix:</strong></p>
<p>Ensure that the `which` command is installed.  After that is completed remove a pid file.  Then start the service.</p>
<pre># yum install which
$ sudo su - zimbra
$ rm -rf /opt/zimbra/log/zmconfigd.pid
$ zmconfigdctl start
$ zmcontrol status</pre>
<p><strong>Why?</strong><br />
My suspicion can be found in the source code for zmconfigdctl:</p>
<pre>NC=`which nc 2&gt;/dev/null`; NC=${NC:-`which netcat 2&gt;/dev/null`}</pre>
<p>Obviously if both `which` and `nc` are missing, zimbra will fail.  Why?</p>
<pre>status=`echo STATUS | $NC -w 10 -i 1 localhost ${zmmtaconfig_listen_port} 2&gt;/dev/null`</pre>
<p>This is used to see if it's running.  Zimbra will notify you during install that netcat is required but does not complain about the 'which' command.  Even my manager complains that I build servers light on installed packages.  Add this to the list of "problems-john-created-due-to-missing-dependencies."</p>
<p>This service's purpose is to monitor for specific configuration changes and restart necessary services in order for those new configurations to take place automatically.</p>
<p>Now I know.</p>
<p><strong>Useful:</strong><br />
http://wiki.zimbra.com/wiki/Zmconfigd</p>

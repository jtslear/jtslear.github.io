---
layout: post
title: Testing Puppet
date: 2013-04-23 07:27:58.000000000 -06:00
type: post
published: true
status: publish
categories: []
tags:
- puppet
- ubuntu
meta:
  _edit_last: '19750133'
  _wpas_done_1386473: '1'
  _publicize_done_external: a:1:{s:8:"linkedin";a:1:{s:10:"Wf9JSr6aRc";b:1;}}
  _wpas_skip_1386473: '1'
author:
  login: jskarbek
  email: jtslear@gmail.com
  display_name: jskarbek
  first_name: ''
  last_name: ''
---
<h2>Requirements:</h2>
<p>2 ubuntu servers</p>
<h2>Notes:</h2>
<ul>
<li>I don't have DNS in my test environment, hence the host file modifications</li>
<li>The domain for my test network is '.home'</li>
<li>The IP of puppet master is 192.168.1.16 and hostname of puppetmaster</li>
<li>The IP of my puppet client is: 192.168.1.17 and hostname of puppetclient</li>
</ul>
<h2>Get Started:</h2>
<h3>On the puppet server:</h3>
<p>Install puppet</p>
<pre>
apt-get install puppetmaster
</pre>
<p>Modify "DNS"</p>
<pre>
vim /etc/hosts
</pre>
<p>Modify the below (this is so the server knows who the client is):</p>
<pre>
127.0.0.1 localhost.localdomain localhost puppet
192.168.1.17 puppetclient.home puppetclient
</pre>
<p>Get my repo</p>
<pre>
cd /etc/puppet
git clone git@github.com:jtslear/bearded-octo-hipster.git
</pre>
<p>Restart puppet for good measure:</p>
<pre>
service puppetmaster restart
</pre>
<p>Ensure it starts appropriately, check log files, etc...</p>
<h3>On the puppet client</h3>
<p>Install puppet</p>
<pre>
apt-get install puppet
</pre>
<p>Modify "DNS"</p>
<pre>
vim /etc/hosts
</pre>
<p>Insert the below (this is so the client knows who the server is):</p>
<pre>
192.168.1.16 puppetmaster.home puppetmaster puppet
</pre>
<p>Configure the service to start</p>
<pre>
vim /etc/default/puppet
</pre>
<p>Modify the below appropriately:</p>
<pre>
START=yes
</pre>
<p>Then start the service:</p>
<pre>
service puppet start
</pre>
<h2>Complete Configuration</h2>
<h3>Server Certificate</h3>
<p>We need to accept the cert provided by the client, on the server:</p>
<pre>
sudo puppetca --sign puppetclient.home
</pre>
<p>On the client, let's restart puppet, and wait for all to install:</p>
<pre>
service puppet restart
tail -f /var/log/syslog
</pre>
